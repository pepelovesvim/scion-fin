"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NodeCryptoStatsSDK = void 0;
const MemoryCache_1 = require("./caches/MemoryCache");
const MongoCache_1 = require("./caches/MongoCache");
const MultiCache_1 = require("./caches/MultiCache");
const RedisCache_1 = require("./caches/RedisCache");
const BaseCryptoStatsSDK_1 = require("./BaseCryptoStatsSDK");
class NodeCryptoStatsSDK extends BaseCryptoStatsSDK_1.BaseCryptoStatsSDK {
    setupCache({ mongoConnectionString, redisConnectionString }) {
        if (mongoConnectionString || redisConnectionString) {
            const caches = [new MemoryCache_1.MemoryCache()];
            if (redisConnectionString) {
                caches.push(new RedisCache_1.RedisCache(redisConnectionString));
            }
            if (mongoConnectionString) {
                caches.push(new MongoCache_1.MongoCache(mongoConnectionString));
            }
            this.cache = new MultiCache_1.MultiCache(caches);
        }
        else {
            this.cache = new MemoryCache_1.MemoryCache();
        }
    }
}
exports.NodeCryptoStatsSDK = NodeCryptoStatsSDK;
